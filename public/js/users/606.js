"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[606],{4547:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(4015),o=r.n(n),a=r(3645),c=r.n(a),s=r(8679),i=c()(o());i.i(s.Z),i.push([e.id,".spinner{margin-bottom:30px!important;margin-left:auto!important;margin-right:auto!important}","",{version:3,sources:["webpack://./resources/js/users/Pages/Users/Catalog.vue"],names:[],mappings:"AAGE,SAGE,4BAAA,CAFA,0BAAA,CACA,2BAAJ",sourcesContent:['\n  @import "v3-infinite-loading/lib/style.css";\n\n  .spinner {\n    margin-left: auto !important;\n    margin-right: auto !important;\n    margin-bottom: 30px !important;\n  }\n'],sourceRoot:""}]);const l=i},1606:(e,t,r)=>{r.r(t),r.d(t,{default:()=>z});var n=r(821),o={class:"container",id:"catalog"},a={class:"row justify-content-between align-items-center"},c={class:"col-auto col-sm-auto"},s={class:"category-name"},i={class:"col-auto col-sm-auto"},l={class:"dropdown"},u={class:"btn bg-transparent dropdown-toggle",type:"button",id:"dropdownSort","data-bs-toggle":"dropdown","aria-expanded":"false"},p={class:"dropdown-menu","aria-labelledby":"dropdownSort"},d={class:"row gy-md-5 gy-3 mt-5 mb-5"},m=(0,n.createElementVNode)("span",null,null,-1);var f=r(7757),g=r.n(f),y=r(6313),b=r(3907),h={class:"card-body"},v={class:"cart-product-info row justify-content-between"},w={class:"col-7 col-sm-auto pe-0"},O={class:"cart-product-info-name"},j={class:"col-auto col-sm-auto ps-0"},k={class:"cart-product-info-cost"};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const C={name:"ProductCard",props:{product:{type:Object,required:!0}},computed:P(P({},(0,b.rn)("currencies",{currency:"currency"})),{},{cost:function(){var e=this.product.cost;return e*=this.currency.value,e=e.toFixed(0),new Intl.NumberFormat("ru-RU").format(e)},costWithPerfics:function(){return this.cost+" "+this.currency.symbol}})};var N=r(3744);const S=(0,N.Z)(C,[["render",function(e,t,r,o,a,c){var s=(0,n.resolveComponent)("ImageItem"),i=(0,n.resolveComponent)("Link");return(0,n.openBlock)(),(0,n.createBlock)(i,{href:/product/+r.product.id,class:(0,n.normalizeClass)(["card product-card",0===r.product.count?"disabled":""])},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",h,[(0,n.createVNode)(s,{source:r.product.image.url},null,8,["source"]),(0,n.createElementVNode)("div",v,[(0,n.createElementVNode)("div",w,[(0,n.createElementVNode)("span",O,(0,n.toDisplayString)(r.product.name),1)]),(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("span",k,(0,n.toDisplayString)(c.costWithPerfics),1)])])])]})),_:1},8,["href","class"])}]]);var V=r(8296),B=r.n(V);function D(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function x(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $={name:"Catalog",layout:y.default,components:{ProductCard:S,InfiniteLoading:B()},data:function(){return{sorts:[{name:"Сначало новые",sort:"new",check:!0},{name:"Сначало дешовые",sort:"lowcost",check:!1},{name:"Сначало дорогие",sort:"hightcost",check:!1}],page:2,noResult:!1,message:"",productsList:[]}},computed:F(F({},(0,b.rn)("i18n",{locale:"locale"})),{},{category:function(){return this.$page.props.category},products:function(){return this.$page.props.products},sort:function(){return this.sorts.find((function(e){return e.check}))}}),mounted:function(){var e;this.setSort(this.$page.props.sort),(e=this.productsList).push.apply(e,x(this.$page.props.products.data))},methods:{setSort:function(e){this.sorts.forEach((function(t){t.check=t.sort===e}))},loadDataFromServer:function(e){var t,r=this;return(t=g().mark((function t(){var n;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.get("/api/catalog/"+r.category.id,{params:{page:r.page,sort:r.sort.sort}});case 3:(n=t.sent).data.payload.products.data.length>0?setTimeout((function(){var t;r.page++,(t=r.productsList).push.apply(t,x(n.data.payload.products.data)),e.loaded(),r.page>n.data.payload.products.last_page&&e.complete()}),1e3):e.complete(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.error();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(e){D(a,n,o,c,s,"next",e)}function s(e){D(a,n,o,c,s,"throw",e)}c(void 0)}))})()}}};var _=r(3379),R=r.n(_),T=r(4547),U={insert:"head",singleton:!1};R()(T.Z,U);T.Z.locals;const z=(0,N.Z)($,[["render",function(e,t,r,f,g,y){var b=this,h=(0,n.resolveComponent)("Link"),v=(0,n.resolveComponent)("ProductCard"),w=(0,n.resolveComponent)("InfiniteLoading");return(0,n.openBlock)(),(0,n.createElementBlock)("section",o,[(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("h2",s,(0,n.toDisplayString)(y.category.translate[e.locale].name),1)]),(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("button",u,(0,n.toDisplayString)(y.sort.name),1),(0,n.createElementVNode)("ul",p,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.sorts,(function(e){var t=e.name,r=e.sort,o=e.check;return(0,n.openBlock)(),(0,n.createElementBlock)("li",null,[(0,n.createVNode)(h,{class:(0,n.normalizeClass)(["dropdown-item bg-transparent",o?"active":""]),to:"/catalog/"+b.category.id,data:{sort:r}},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(t),1)]})),_:2},1032,["class","to","data"])])})),256))])])])]),(0,n.createElementVNode)("div",d,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.productsList,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"col-lg-4 col-6",key:e.id},[(0,n.createVNode)(v,{product:e},null,8,["product"])])})),128))]),(0,n.createVNode)(w,{productsList:e.productsList,"first-load":!1,onInfinite:y.loadDataFromServer},{complete:(0,n.withCtx)((function(){return[m]})),_:1},8,["productsList","onInfinite"])])}]])}}]);
//# sourceMappingURL=606.js.map